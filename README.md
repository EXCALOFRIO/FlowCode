# FlowCode - Agente de Gemini Docker\n\nEste proyecto implementa un agente autónomo que utiliza IA de Google Gemini para realizar tareas en contenedores Docker.\n\n## Características\n\n- Modelo utilizado: gemini-2.5-flash-preview-04-17\n- Agente autónomo con capacidad de auto-recuperación ante errores\n- Interfaz por línea de comandos (CLI) y API REST\n- Función calling optimizada para mayor precisión\n- Gestión completa de contenedores Docker\n- Funcionalidades avanzadas de edición de archivos y búsqueda\n\n## Requisitos\n\n- Python 3.9+\n- Docker\n- API Key de Google AI Studio (Gemini)\n\n## Configuración\n\n1. Clone el repositorio\n2. Instale las dependencias: pip install -r requirements.txt\n3. Cree un archivo .env a partir del ejemplo:\n   `\n   GOOGLE_API_KEY=your_api_key_here\n   DOCKER_MANAGER_URL=http://127.0.0.1:9001\n   DEFAULT_MODEL=gemini-2.5-flash-preview-04-17\n   API_PORT=8001\n   `\n\n## Uso\n\n### Iniciar todos los componentes\n\n`ash\npython run.py --all --interactive\n`\n\n### Ejecutar una tarea específica de forma autónoma\n\n`ash\npython run.py --all --autonomo --task "Crea un servidor web simple con Flask"\n`\n\n### Iniciar solo el API REST\n\n`ash\npython run.py --api\n`\n\n### Iniciar solo el Docker Manager\n\n`ash\npython run.py --docker-manager\n`\n\n## Componentes\n\n- **docker_manager_app.py**: Gestiona el contenedor Docker y proporciona API REST\n- **agent.py**: Implementación principal del agente con Gemini\n- **cli_agent.py**: Interfaz de línea de comandos para interactuar con el agente\n- **api_agent.py**: API REST para interactuar con el agente\n- **structured_agent.py**: Extensión para respuestas estructuradas JSON\n\n## Modos de uso del CLI\n\n- **Modo interactivo**: Permite interactuar con el agente paso a paso, solo requiere aprobación del plan\n  `ash\npython cli_agent.py --interactive\n`\n\n- **Modo autónomo**: Ejecuta la tarea de forma completamente autónoma, con auto-recuperación\n  `ash\npython cli_agent.py --autonomo --task "Descripción de la tarea"\n`\n\n## Interacción con Docker\n\nEl agente puede realizar varias operaciones en contenedores Docker:\n\n- Ejecutar comandos\n- Crear y manipular archivos\n- Editar archivos (por líneas, contenido completo o bloques)\n- Buscar archivos y contenido dentro de archivos\n- Instalar paquetes y dependencias\n- Cambiar permisos de archivos\n- Crear checkpoints y restaurarlos\n- Obtener estadísticas y logs del contenedor\n- Analizar contenido\n\n## Funcionalidades avanzadas\n\n### Búsqueda y manipulación de archivos\n- Búsqueda de archivos por patrón: `search_files_in_docker(pattern, base_path)`\n- Búsqueda de texto en archivos: `search_in_files_docker(query, base_path)`\n- Edición de líneas específicas: `edit_file_lines_in_docker(container_path, start_line, end_line, new_content)`\n- Edición de bloques de código: `edit_file_block_in_docker(container_path, search_block, replacement_block)`\n- Cambio de permisos: `chmod_path_in_docker(container_path, mode)`\n\n### Gestión de dependencias\n- Instalación de dependencias desde archivo: `install_dependencies_in_docker(dependencies_content, dep_type)`\n\n### Monitoreo y diagnóstico\n- Estadísticas de recursos: `get_container_stats()`\n- Logs del contenedor: `get_container_logs(tail)`\n- Reinicio del contenedor: `reset_container()`\n\n## API REST\n\nLa API REST proporciona acceso a todas las funcionalidades del agente:\n\n- `/tasks`: Gestión de tareas (crear, listar, obtener, eliminar, reiniciar)\n- `/tasks/{task_id}/steps`: Ejecución de pasos de una tarea\n- `/docker/search/files`: Búsqueda de archivos por patrón\n- `/docker/search/content`: Búsqueda de texto en archivos\n- `/docker/files/edit`: Edición de archivos\n- `/docker/files/chmod`: Cambio de permisos\n- `/docker/dependencies/install`: Instalación de dependencias\n- `/docker/stats`: Estadísticas del contenedor\n- `/docker/logs`: Logs del contenedor\n- `/docker/reset`: Reinicio del contenedor\n\n## Manejo de errores\n\nEl agente implementa estrategias de auto-recuperación ante errores comunes:\n- Archivos o directorios no encontrados\n- Problemas de permisos\n- Comandos no disponibles\n- Errores de instalación de paquetes\n\n## Licencia\n\nMIT\n
